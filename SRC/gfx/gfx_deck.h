/*
  0000000000111111111122222222223333333333444444444455555555556666666666777777
  0123456789012345678901234567890123456789012345678901234567890123456789012345
23   ▛▔▔▔▔▔▔▔▜▁▁ ▁▁▁▁▁▁▁                                            ▟▛
24   ▙            ▐ ╓  ▖                              ▁▁▁║║▁▁▁▁ ▁▌ ▟▛ 
25   ▜▙▔▔▔▔▔▔▜▔▔ ▔▔▔║▔▔▌                              ▐  ╝╚   ▝ ▘▌▟▛      ▟██▛
26    ▜▙            ║      ▗   ▖          ▗      ▖    ▐          █▛    ▟███▛
27     ▜▇▇▇▇▇▇▇▇▇▇▇▇║▇▇▇▇▇▇▇   ▇▇▇▇▇▇▇  ▇▇▇      ▇▇▇▇▇▇▇▇▇▇▇▇▇▇ ▇▇▇██████▛
28    █   ▜ ▔  ▔  ▔ ║ ▔  ▔     ▔  ▔     ▔         ▔  ▔  ▔ ▔  ▔     ▒▒██▛
29   ▓▓╦════════════╩═                                             ▒▒█▛
30   ██▐  ▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▛   ▒▒▒▒▒▒▒  ▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒ ▒▒▒▒█▛
31   ██▐  ▐   ▌ ▔  ▔  ▔  ▔ ▌  ▏▌ ▔  ▔    ▔        ▔  ▔  ▔  ▔  ▜█▛  ▒▇
32  ███ ▌ ▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▌  ▏▌▒▒▒▒▒▒  ▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒█▒▒▒▒▇
33  ██▓▓▌ ▟▒▒▒▒ ▔  ▔  ▔  ▔ ▌  ▏▌ ▔  ▔    ▔        ▔  ▔  ▔  ▔  ▒█▒▒▇▇
34  ████▐ ▜█▒▒▒▒▒▒         ▌  ▏▌                           ▒▒▒▒▇▇▇▇
35  ███▓▓  ▜█████▒▒▒▒▒▒▒   ▌  ▏▌     ▟  ▙                ▒▒▒▇▇▇▇▇
36  ████▌▌  ▜██████████▒▒▒▒▌  ▏▌▒▒▒▒▒▒  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▇▇▇▇▇
37  ████▌▌▟██████████████████████████████████████████████████
  0000000000111111111122222222223333333333444444444455555555556666666666777777
  0123456789012345678901234567890123456789012345678901234567890123456789012345
*/


#define IB BEI_BLU 
#define IG BEI_DGR 
#define IR BEI_BRO
#define ID BEI_DBR
#define IW BEI_WOO

#define WB WOO_BLU 
#define WG WOO_DGR 
#define WI WOO_BEI 
#define WR WOO_BRO
#define WD WOO_DBR

#define RB BRO_BLU 
#define RG BRO_DGR 
#define RI BRO_BEI 
#define RD BRO_DBR
#define RW BRO_WOO

#define DB DBR_BLU 
#define DG DBR_DGR 
#define DI DBR_BEI 
#define DR DBR_BRO
#define DW DBR_WOO

#define YB YEL_BLU


#define N_DECKPARTS 13
enum deck_parts { 
                  ZMAST,MMAST,FMAST,TMAST,
                  CNEST,BANNR,RUDDR,
                  QDECK,FDECK,MDECK,DDECK,ODECK,CDECK };
                         
struct deck_gfx {
        PANEL *P[N_DECKPARTS];
};

struct recspec {
        int h;
        int w;
        int y0;
        int x0;
};

// Cabin door
static struct gpkg cabin_door  = {2,{ 0, 8}, WB, {{L"▕"},{L"░"}}};
// Rudder mechanism
static struct gpkg rudder_mech = {6,{0}, DGREY, {{L"═"},{L"║"},{L"╦"},{L"╩"},{L"╓"},{L"╖"}}};
// Mizzen mast
static struct gpkg mizzen_mast = {1,{ 16, 11, 11, 1 }, WB, {{L"▓"}}};
// Main mast
static struct gpkg main_mast   = {2,{  0, 33, 36, 1}, WB, {{L"▓"},{L"▋"}}};
// Fore mast
static struct gpkg fore_mast   = {1,{ 13, 59, 18, 1}, WB, {{L"▓"}}};



static struct recspec nao[N_DECKPARTS] = {/*  h   w  y0  x0  */

                               /* ZMAST */ { 22,  1, 15, 12 },
                               /* MMAST */ { 38,  1,  8, 34 },
                               /* FMAST */ { 22,  1, 19, 59 },
                               /* TMAST */ {  6,  1,  0, 34 },
                               /* CNEST */ {  2,  5,  6, 32 },
                               /* BANNR */ {  2,  2,  0, 35 }, 
                               /* RUDDR */ { 10,  6, 37,  1 },
                               /* QDECK */ {  4, 19, 31,  1 },
                               /* FDECK */ {  3, 25, 32, 50 },
                               /* MDECK */ {  2, 70, 35,  2 }, 
                               /* DDECK */ {  3, 62, 37,  7 }, 
                               /* ODECK */ {  2, 59, 40,  7 },
                               /* CDECK */ {  5, 58, 42,  7 } };

//                    000000000011111111
//                    012345678901234567
static wchar_t b[]={L"▁▂▃▄▅▆▇█▉▊▋▌▍▎▏▐▕▔"};
//                    000
//                    012
static wchar_t d[]={L"▓▒░"};
//                    00000000001
//                    01234567890
static wchar_t c[]={L"▙▟▛▜▚▞▖▗ ▘▝"};
//                    00000000001111111111222222222
//                    01234567890123456789012345678
static wchar_t p[]={L"═║╒╓╔╕╖╗╘╙╚╛╜╝╞╟╠╡╢╣╤╥╦╧╨╩╪╫╬"};
//                    0000000000111111111122222222223333333333444444444455555555556666
//                    0123456789012345678901234567890123456789012345678901234567890123
static wchar_t l[]={L"┐┑┒┓└┕┖┗┘┙┚┛├┝┞┟┠┡┢┣┤┥┦┧┨┩┪┫┬┭┮┯┰┱┲┳┴┵┶┷┸┹┺┻┼┽┾┿╀╁╂╃╄╅╆╇╈╉╊╋╌╍╎╏"};



// Quarter deck ---------------------------------------------------------------------------------------
#define QDECKH 4
static struct gpkg _qdeck[QDECKH] = {
{1,{ 0, 0}, WD, {{L"         "}}}, 
{1,{ 1, 0}, WD, {{L"▛▔▔▔▔▔▔▔▜▁▁ ▁▁▁▁▁▁▁"}}}, 
{1,{ 2, 0}, WD, {{L"▙            ▐    ▖"}}},
{1,{ 3, 0}, WD, {{L"▜▙▔▔▔▔▔▔▜▔▔ ▔▔▔ ▔▔▌"}}},
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _qdbar[QDECKH] = {
{{RD, RW},        {"111111111"}},
{{RD, RW},        {"0000000001111111111"}},
{{RD, RB},        {"0000000000000000001"}},
{{RD, RB},        {"1000000000000000001"}}
};
#define FDECKH 3
static struct gpkg _fdeck[FDECKH] = {
{1,{ 0,14}, WB,               {{L"▟▛"}}},
{1,{ 1, 0}, WB, {{L"▁▁▁║║▁▁▁▁ ▁▌ ▟▛ "}}},
{1,{ 2, 0}, WD, {{L"▐  ╝╚   ▝ ▘▌▟▛      ▟██▛"}}}
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _fdbar[FDECKH] = {
{{RD, RW, RB},                  {"22"}},
{{RD, RW, RB},    {"111111111112222222222222"}},
{{RD, RW, RB},    {"200000000002222222222222"}}
};

// Main deck ---------------------------------------------------------------------------------------
#define MDECKH 2
static struct gpkg _mdeck[MDECKH] = {
{1,{ 0, 0}, WD, {{L"▜▙                                  ▗      ▖               █▛    ▟███▛"}}},
{1,{ 1, 1}, WD,  {{L"▝▜▇▇▇▇▇▇▇▇▇▇▇ ▇▇▇▇▇▇█▛ ▜█▇▇▇▇▇█ █▇▇█      █▇▇▇▇▇▇▇▇▇▇▇▇▇ ▇▇▇▇▇▇▇██▛"}}}
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _mdbar[MDECKH] = {
{{RD, IW, RB},    {"2000000000000000011111111111111111111111111111111000000000022222222222"}},
{{RD, RW, RB},     {"2211111111111011111110001111111011110000001111111111111101111111122"}}
};

// Mid deck -------------------------------------------------------------------------------------------
#define DDECKH 3
static struct gpkg _ddeck[DDECKH] = {
{1,{ 0, 0}, WD, {{L"▜ ▔  ▔  ▔   ▔  ▔     ▔  ▔     ▔         ▔  ▔  ▔ ▔  ▔    ▒▒██▛"}}},
{1,{ 1, 0}, WD, {{L"                                                        ▒▒█▛"}}},
{1,{ 2, 0}, WD, {{L"▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▛  ▜▒▒▒▒▒▒ ▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒ ▒▒▒▒█▛"}}}
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _ddbar[DDECKH] = {
{{RD, RW, RB},    {"2000000000000000000000000000000000000000000000000000000011222"}},
{{RD, RW, RB},    {"200000000000000000000000000000000000000000000000000000001122"}},
{{RW, WD, RB},    {"20000000000000000111100000010000111111000000000000001000022"}}
};

// Orlop deck -----------------------------------------------------------------------------------------
#define ODECKH 2
static struct gpkg _odeck[ODECKH] = {
{1,{ 0, 0}, WD, {{L"▐   ▌ ▔  ▔  ▔  ▔ ▌  ▟ ▔  ▔   ▔         ▔  ▔  ▔  ▔  ▜█▛  ▒▇"}}},
{1,{ 1, 0}, WD, {{L"▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▌  ▜▒▒▒▒▒▒ ▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒█▒▒▒▒▇"}}}
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _odbar[ODECKH] = {
{{RB, WD, RD},    {"0111111111111111111111111111111111111111111111111111111112"}},
{{RW, WD, RD, RB},{"3000000000000000011110000001000011111100000000000000100002"}}
};

// Cargo hold -----------------------------------------------------------------------------------------
#define CDECKH 5
static struct gpkg _cdeck[CDECKH] = {
{1,{ 0, 0}, WD, {{L"▟▒▒▒▒ ▔  ▔  ▔  ▔ ▌  ▟ ▔  ▔   ▔         ▔  ▔  ▔  ▔  ▒█▒▒▇▇"}}},
{1,{ 1, 0}, WD, {{L"▜▇▒▒▒▒▒▒         ▌  ▜                           ▒▒▒▒▇▇▇▇"}}},
{1,{ 2, 1}, WD,  {{L"▜▇▇▇▇▇▒▒▒▒▒▒▒   ▌  ▟     ▟ ▙                 ▒▒▒▒▇▇▇▇▇"}}},
{1,{ 3, 2}, WD,   {{L"▜▇▇▇▇▇▇▇▇▇▇▒▒▒▒▌  ▜▒▒▒▒▒▒ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▇▇▇▇▇"}}},
{1,{ 4, 0}, WD, {{L"▟███▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇"}}}
//                  000000000011111111112222222222333333333344444444445555555555666666666677777
//                  012345678901234567890123456789012345678901234567890123456789012345678901234
};
static struct cbar _cdbar[CDECKH] = {
{{RW, WD, RD, RB},{"300001111111111111111111111111111111111111111111111010022"}},
{{RW, WD, RD, RB},{"32000000111111111111111111111111111111111111111100002222"}},
{{RW, WD, RD, RB}, {"322222000000011111111111111111111111111111111000022222"}},
{{RW, WD, RD, RB},  {"32222222222000011110000001000000000000000000022222"}},
{{RW, WD, RD, RB},{"322222222222222222222222222222222222222222222222222"}}
};

// Mizzen mast --------------------------------------------------------------------------------------
#define ZMASTH 22 
static struct gpkg _zmast[ZMASTH] = {
{ 1, { 0, 0}, WR, {{L"▓"}}},
{ 1, { 1, 0}, WR, {{L"▓"}}},
{ 1, { 2, 0}, WR, {{L"▓"}}},
{ 1, { 3, 0}, WR, {{L"▓"}}},
{ 1, { 4, 0}, WR, {{L"▓"}}},
{ 1, { 5, 0}, WR, {{L"▓"}}},
{ 1, { 6, 0}, WR, {{L"▓"}}},
{ 1, { 7, 0}, WR, {{L"▓"}}},
{ 1, { 8, 0}, WR, {{L"▓"}}},
{ 1, { 9, 0}, WR, {{L"▓"}}},
{ 1, {10, 0}, WR, {{L"▓"}}},
{ 1, {11, 0}, WR, {{L"▓"}}},
{ 1, {12, 0}, WR, {{L"▓"}}},
{ 1, {13, 0}, WR, {{L"▓"}}},
{ 1, {14, 0}, WR, {{L"▓"}}},
{ 1, {15, 0}, WR, {{L"▓"}}},
{ 1, {16, 0}, WR, {{L"▓"}}},
{ 1, {17, 0}, WR, {{L"▓"}}},
{ 1, {18, 0}, RW, {{L"▓"}}},
{ 1, {19, 0}, RW, {{L"▓"}}},
{ 1, {20, 0}, RW, {{L"▓"}}},
{ 1, {21, 0}, RW, {{L"▓"}}}
};

// Main mast --------------------------------------------------------------------------------------
#define MMASTH 38
static struct gpkg _mmast[MMASTH] = {
{ 1, { 0, 0}, WR, {{L"▓"}}},
{ 1, { 1, 0}, WR, {{L"▓"}}},
{ 1, { 2, 0}, WR, {{L"▓"}}},
{ 1, { 3, 0}, WR, {{L"▓"}}},
{ 1, { 4, 0}, WR, {{L"▓"}}},
{ 1, { 5, 0}, WR, {{L"▓"}}},
{ 1, { 6, 0}, WR, {{L"▓"}}},
{ 1, { 7, 0}, WR, {{L"▓"}}},
{ 1, { 8, 0}, WR, {{L"▓"}}},
{ 1, { 9, 0}, WR, {{L"▓"}}},
{ 1, {10, 0}, WR, {{L"▓"}}},
{ 1, {11, 0}, WR, {{L"▓"}}},
{ 1, {12, 0}, WR, {{L"▓"}}},
{ 1, {13, 0}, WR, {{L"▓"}}},
{ 1, {14, 0}, WR, {{L"▓"}}},
{ 1, {15, 0}, WR, {{L"▓"}}},
{ 1, {16, 0}, WR, {{L"▓"}}},
{ 1, {17, 0}, WR, {{L"▓"}}},
{ 1, {18, 0}, WR, {{L"▓"}}},
{ 1, {19, 0}, WR, {{L"▓"}}},
{ 1, {20, 0}, WR, {{L"▓"}}},
{ 1, {21, 0}, WR, {{L"▓"}}},
{ 1, {22, 0}, WR, {{L"▓"}}},
{ 1, {23, 0}, WR, {{L"▓"}}},
{ 1, {24, 0}, WR, {{L"▓"}}},
{ 1, {25, 0}, WR, {{L"▓"}}},
{ 1, {26, 0}, WR, {{L"▓"}}},
{ 1, {27, 0}, WR, {{L"▓"}}},
{ 1, {28, 0}, RW, {{L"▓"}}},
{ 1, {29, 0}, RW, {{L"▓"}}},
{ 1, {30, 0}, RW, {{L"▓"}}},
{ 1, {31, 0}, RW, {{L"▓"}}},
{ 1, {32, 0}, RW, {{L"▓"}}},
{ 1, {33, 0}, RW, {{L"▓"}}},
{ 1, {34, 0}, RW, {{L"▓"}}},
{ 1, {35, 0}, RW, {{L"▓"}}},
{ 1, {36, 0}, RW, {{L"▓"}}},
{ 1, {37, 0}, RW, {{L"▓"}}}
};

// Fore mast --------------------------------------------------------------------------------------
#define FMASTH 22 
static struct gpkg _fmast[FMASTH] = {
{ 1, { 0, 0}, WR, {{L"▓"}}},
{ 1, { 1, 0}, WR, {{L"▓"}}},
{ 1, { 2, 0}, WR, {{L"▓"}}},
{ 1, { 3, 0}, WR, {{L"▓"}}},
{ 1, { 4, 0}, WR, {{L"▓"}}},
{ 1, { 5, 0}, WR, {{L"▓"}}},
{ 1, { 6, 0}, WR, {{L"▓"}}},
{ 1, { 7, 0}, WR, {{L"▓"}}},
{ 1, { 8, 0}, WR, {{L"▓"}}},
{ 1, { 9, 0}, WR, {{L"▓"}}},
{ 1, {10, 0}, WR, {{L"▓"}}},
{ 1, {11, 0}, WR, {{L"▓"}}},
{ 1, {12, 0}, WR, {{L"▓"}}},
{ 1, {13, 0}, WR, {{L"▓"}}},
{ 1, {14, 0}, WR, {{L"▓"}}},
{ 1, {15, 0}, RW, {{L"▓"}}},
{ 1, {16, 0}, RW, {{L"▓"}}},
{ 1, {17, 0}, RW, {{L"▓"}}},
{ 1, {18, 0}, RW, {{L"▓"}}},
{ 1, {19, 0}, RW, {{L"▓"}}},
{ 1, {20, 0}, RW, {{L"▓"}}},
{ 1, {21, 0}, RW, {{L"▓"}}}
};

// Top mast ---------------------------------------------------------------------------------
#define TMASTH 6 
static struct gpkg _tmast[TMASTH] = {
{ 1, { 0, 0}, YB, {{L"∙"}}},  
{ 1, { 1, 0}, IB, {{L"│"}}},
{ 1, { 2, 0}, IB, {{L"│"}}},
{ 1, { 3, 0}, WB, {{L"╽"}}},
{ 1, { 4, 0}, WB, {{L"┃"}}},
{ 1, { 5, 0}, WB, {{L"┃"}}}
};

// Crow's nest ---------------------------------------------------------------------------------
#define CNESTH 2
static struct gpkg _cnest[CNESTH] = {
{ 1, { 0, 0}, WB, {{L"┯┯┯┯┯"}}},
{ 1, { 1, 0}, WR, {{L"▒▓███"}}}
};                                     

// Banner (flag) -----------------------------------------------------------------------------
#define BANNRH 2
static struct gpkg _bannr[BANNRH] = {
{ 1, { 0, 0}, WB, {{L"◠◡"}}},  
{ 1, { 1, 0}, WB, {{L"◠◡"}}}
};

// Rudder ---------------------------------------------------------------------------------------------
#define RUDDRH 10 
static struct gpkg _ruddr[RUDDRH] = {
//                    0000000
//                    0123456
{ 1, { 0, 2}, WB,   {{L"█"}}},
{ 1, { 1, 1}, WB,  {{L"▓▓"}}},
{ 1, { 2, 1}, WB,  {{L"██▐"}}},
{ 1, { 3, 1}, WB,  {{L"██▐"}}},
{ 1, { 4, 0}, WB, {{L"███ ▌"}}},
{ 1, { 5, 0}, WB, {{L"██▓▓▌"}}},
{ 1, { 6, 0}, WB, {{L"████▐"}}},
{ 1, { 7, 0}, WB, {{L"███▓▓"}}},
{ 1, { 8, 0}, WB, {{L"████▌▌"}}},
{ 1, { 9, 0}, WB, {{L"████▌▌"}}}
//                    0000000
//                    0123456
};

static struct gpkg *gfx[N_DECKPARTS] = {  
                                         _zmast, _mmast, _fmast, _tmast, 
                                         _cnest, _bannr, _ruddr,
                                         _qdeck, _fdeck, _mdeck, _ddeck, _odeck, _cdeck
                                       };

static struct cbar *bar[N_DECKPARTS] = { 
                                           NULL,   NULL,   NULL,   NULL,
                                           NULL,   NULL,   NULL,
                                         _qdbar, _fdbar, _mdbar, _ddbar, _odbar, _cdbar 
                                       };

